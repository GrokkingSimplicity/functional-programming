# 계층형 설계 2

## 패턴 1: 직접 구현

함수 시그니처가 나타내고 있는 문제를 함수 본문에서 적절한 구체와 수준으로 해결해야한다. 너무 구체적이라면 코드에서 나는 냄새

## 패턴2: 추상화 벽

어떤 계층은 중요한 세부 구현을 감추고 인터페이스를 제공한다. 인터페이스를 사용하면 높은 차원으로 생각할 수 있고, 고수준의 추상화 단계만 생각하면 되기 때문에 두뇌 용량의 한계를 극복할 수 있다.

- 팀간의 책임을 명확하게 나눈다.
  추상화 벽은 세부 구현을 감춘 함수로 이루어진 계층으로 추상화 벽에 있는 함수를 사용할때는 구현을 전혀 몰라도 함수를 쓸 수 있다.

### 언제 사용하면 좋을까

1. 쉬게 구현을 바꾸기 위해서
2. 코드를 읽고 쓰기 쉽게 만들기 위해서
3. 팀 간에 조율해야할 것을 줄이기 위해
4. 주어진 문제에 집중하기 위해, 코드의 의존성을 줄일 수 있다.

신경쓰지 않아도 되는것을 다루는것이 추상화 벽의 핵심으로 어느부분을 신경쓰지 않도록 만들지, 사람들이 몰라도 되면 좋은것은 뭉엇인지, 어떤 함수들의 비슷한 세부 사항을 신경쓰지 않아도 되는 함수인지 고민해보자.

## 패턴3: 작은 인터페이스

시스템이 커질수록 비즈니스 개념을 나타내는 중욯나 인터페이스는 작고 강력한 동작으로 구성하는것이 좋다.

- 작은 인터페이스는 새로운 코드를 추가할 위치에 관한것으로 인터페이스를 최소화하면 하위 계층에 불필요한 기능이 쓸데없이 커지는 것을 막을 수 있다.
- 위치를 결정하는데 가장 중요한 요소는 인터페이스를 깔끔하게 유지해야하는 함
- 상위 계층에 어떤 함수를 만들때는 가능한 현재 계층에 있는 함수로 구현하는것이 작은 인터페이스를 실천하는 방법, 함수가 하려는 목적을 잘 파악하고 어떤 계층에 구현하는것이 적합할 지 생각해보자.

## 패턴4: 편리한 계층

계층형 설계 패턴과 실천 방법은 개발자의 요구를 만족시키면서 비즈니스 문제를 잘 풀 수 있어야한다. 소프트웨어를 더 빠르고 고품질로 제공하는데 도움이 되는 계층에 시간을 투자해야하며, 코드와 그 코드가 속한 추상화 계층은 작업할 때 편리해야한다.

- 지금 편라하다면 호출 화살표가 조금 길어지거나 계층이 다른 계층과 섞여도 설계는 조금 멈춰도 된다. 하지만 구체적인것을 너무 많이 알아야하거나, 코드가 지저분하게 느껴지면 다시 패턴을 적용하자.
- 어떤 코드도 이상적인 모습에 도달할 수 없다. 언제나 설게와 새로운 긴으의 필요성 사이 어느 지점에 머물게 된다. 코드를 가지고 일을 하면서 개발자로서의 필요성과 비즈니스 요구사항 모두를 만족시켜야한다.
- 기능적 요구사항 외에 비기능적 요구사항인 테스트성(어떤것을 테스트하는것이 중요한지), 재사용성(어떤 함수가 재사용하기 좋은가), 유지보수성(요구사항이 바뀌었을 떄 가장 쉽게 고칠 수 있는 코드는 어떤 코드인가)은 소프트웨어 설계를 하는 중요한 이유
  - 그래프의 가장 위에 있는 코드가 고치기 좋음
  - 반대로 하단이 가장 고치기 힘듦, 코드 위에 너무 많은 코드를 만들었기 떄문
  - 가장 아래에 있는 코드를 테스트하는것이 중요하다.
  -

# 일급함수

- 일급값은 변수에 저장할 수 있고, 인자로 전달하거나 함수의 린턴값으로 사용할 수 있다. 일급값은 코드로 다룰 수 있는 값
- 일급이 아닌 기능은 함수로 감싸 읽브으로 만들 수 있다.
- 일급함수는 어떤 단계 이상의 함수형 프로그래밍을 하는데 필요하다.
- 고차함수는 다른 함수에 인자로 넘기거나 리턴갑승로 받을 수 있는 함수로 다양한 동작을 추상화할 수 있다.
- 함수 이름에 있는 암물적 인자를 명시적인자로 드러내고, 동작을 추상화하기 위해 본문을 콜백으로 바꾼다.

## 결론

- 모든 상황에 맞는 정답은 없고 내가 지금 처한 상황과 환경에서 어떤게 최선일지 끊임없이 고민해야한다.
